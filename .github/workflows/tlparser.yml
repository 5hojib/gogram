name: Go TL Parser

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:

  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: Set up Go
      uses: actions/setup-go@v4
      with:
        go-version: '1.22'

    - name: Build
      run: go build -o tlgen ./internal/cmd/tlgen

    - name: Parse TL Schema
      run: ./tlgen

    - name: Send PR
      uses: peter-evans/create-pull-request@v3 
      with:
            token: ${{ secrets.GITHUB_TOKEN }}
            commit-message: Auto LTL
            title: Auto LTL
            body: Automatically generated pull request from TLParser workflow
            branch: auto-ltl
            base: master
            branch-suffix: timestamp


